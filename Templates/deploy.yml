parameters:
  environment: 'dev'
  buildConfiguration: 'Release'
  appName: 'WebAppNameDev'
  stageName: 'Dev'
  dependsOn: Build
  condition: 'true'

stages:
- stage: '${{ stageName }}'
  displayName: 'Deploy to the ${{ environment }} environment'
  dependsOn: ${{ dependsOn }}
  condition: ${{ condition }}
  jobs:
    - deployment: Deploy
      pool:
        vmImage: 'ubuntu-16.04'
      environment: ${{ environment }}
      variables:
        - group: 'Release'
      strategy:
        runOnce:
          deploy:
            steps:
              - download: current
                artifact: drop
              - task: AzureWebApp@1
                displayName: 'Azure App Service deploy: website'
                inputs:
                  azureSubscription: 'Resource Manager - Tailspin - Space Game'
                  appName: '${{ appName }}'
                  package: '$(Pipeline.Workspace)/drop/${{ buildConfiguration }}/*.zip'
